openapi: "3.1.0"
info:
  title: "tiltakspenger_datadeling API"
  description: "tiltakspenger_datadeling API"
  version: "1.0.0"
servers:
  - url: "https://tiltakspenger-datadeling.intern.dev.nav.no"
paths:
  /arena/meldekort:
    post:
      description: ""
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/VedtakReqDTO"
        required: true
      responses:
        "400":
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MappingError"
        "401":
          description: "Unauthorized"
        "403":
          description: "Forbidden"
        "200":
          description: "OK"
          content:
            application/json:
              schema:
                type: "array"
                items:
                  $ref: "#/components/schemas/ArenaMeldekort"
  /arena/utbetalingshistorikk:
    post:
      description: ""
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/VedtakReqDTO"
        required: true
      responses:
        "400":
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MappingError"
        "401":
          description: "Unauthorized"
        "403":
          description: "Forbidden"
        "200":
          description: "OK"
          content:
            application/json:
              schema:
                type: "array"
                items:
                  $ref: "#/components/schemas/ArenaUtbetalingshistorikk"
  /arena/utbetalingshistorikk/detaljer:
    get:
      description: ""
      parameters:
        - name: "vedtakId"
          in: "query"
          schema:
            type: "number"
        - name: "meldekortId"
          in: "query"
          schema:
            type: "number"
      responses:
        "400":
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MappingError"
        "401":
          description: "Unauthorized"
        "403":
          description: "Forbidden"
        "200":
          description: "OK"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ArenaUtbetalingshistorikkDetaljer"
  /behandlinger/perioder:
    post:
      description: ""
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/VedtakReqDTO"
        required: true
      responses:
        "400":
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MappingError"
        "401":
          description: "Unauthorized"
        "403":
          description: "Forbidden"
        "200":
          description: "OK"
          content:
            application/json:
              schema:
                type: "array"
                items:
                  $ref: "#/components/schemas/BehandlingResponse"
  /behandlinger/apne:
    post:
      description: ""
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BehandlingRequest"
        required: true
      responses:
        "400":
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MappingError"
        "401":
          description: "Unauthorized"
        "403":
          description: "Forbidden"
        "200":
          description: "OK"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TpsakBehandlingRespons"
  /vedtak/detaljer:
    post:
      description: ""
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/VedtakReqDTO"
        required: true
      responses:
        "400":
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MappingError"
        "401":
          description: "Unauthorized"
        "403":
          description: "Forbidden"
        "200":
          description: "OK"
          content:
            application/json:
              schema:
                type: "array"
                items:
                  $ref: "#/components/schemas/VedtakDetaljerResponse"
  /vedtak/perioder:
    post:
      description: ""
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/VedtakReqDTO"
        required: true
      responses:
        "400":
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MappingError"
        "401":
          description: "Unauthorized"
        "403":
          description: "Forbidden"
        "200":
          description: "OK"
          content:
            application/json:
              schema:
                type: "array"
                items:
                  $ref: "#/components/schemas/VedtakDTO"
  /vedtak/tidslinje:
    post:
      description: ""
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/VedtakReqDTO"
        required: true
      responses:
        "400":
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MappingError"
        "401":
          description: "Unauthorized"
        "403":
          description: "Forbidden"
        "200":
          description: "OK"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VedtakTidslinjeResponse"
  /meldekort/detaljer:
    post:
      description: ""
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/VedtakReqDTO"
        required: true
      responses:
        "400":
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MappingError"
        "401":
          description: "Unauthorized"
        "403":
          description: "Forbidden"
        "200":
          description: "OK"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MeldekortResponse"
components:
  schemas:
    VedtakReqDTO:
      type: "object"
      properties:
        ident:
          type: "string"
        fom:
          type: "string"
        tom:
          type: "string"
      required:
        - "ident"
    BehandlingRequest:
      type: "object"
      properties:
        ident:
          type: "string"
      required:
        - "ident"
    MappingError:
      type: "object"
      properties:
        feilmelding:
          type: "string"
      required:
        - "feilmelding"
    BehandlingResponse:
      type: "object"
      properties:
        behandlingId:
          type: "string"
        fom:
          type: "string"
          format: "date"
        tom:
          type: "string"
          format: "date"
      required:
        - "behandlingId"
        - "fom"
        - "tom"
    TpsakBehandlingRespons:
      type: "object"
      properties:
        behandlinger:
          type: "array"
          items:
            $ref: "#/components/schemas/TpsakBehandling"
        sak:
          type: "object"
          $ref: "#/components/schemas/Sak"
      required:
        - "behandlinger"
        - "sak"
    TpsakBehandling:
      type: "object"
      properties:
        behandlingId:
          type: "string"
        fom:
          type: "string"
          format: "date"
        tom:
          type: "string"
          format: "date"
        behandlingstatus:
          type: "string"
          enum:
            - "UNDER_AUTOMATISK_BEHANDLING"
            - "KLAR_TIL_BEHANDLING"
            - "UNDER_BEHANDLING"
            - "KLAR_TIL_BESLUTNING"
            - "UNDER_BESLUTNING"
            - "VEDTATT"
            - "AVBRUTT"
            - "GODKJENT"
            - "AUTOMATISK_BEHANDLET"
            - "IKKE_RETT_TIL_TILTAKSPENGER"
        behandlingstype:
          type: "string"
          enum:
            - "SOKNADSBEHANDLING"
            - "REVURDERING"
            - "MELDEKORTBEHANDLING"
        saksbehandler:
          type: "string"
        beslutter:
          type: "string"
        iverksattTidspunkt:
          type: "string"
          format: "date-time"
        opprettet:
          type: "string"
          format: "date-time"
        sistEndret:
          type: "string"
          format: "date-time"
      required:
        - "behandlingId"
        - "behandlingstatus"
        - "behandlingstype"
        - "opprettet"
        - "sistEndret"
    Sak:
      type: "object"
      properties:
        sakId:
          type: "string"
        saksnummer:
          type: "string"
        kilde:
          type: "string"
        status:
          type: "string"
        opprettetDato:
          type: "string"
          format: "date-time"
      required:
          - "sakId"
          - "saksnummer"
          - "kilde"
          - "status"
          - "opprettetDato"
    VedtakDetaljerResponse:
      type: "object"
      properties:
        fom:
          type: "string"
          format: "date"
        tom:
          type: "string"
          format: "date"
        rettighet:
          type: "string"
          enum:
            - "TILTAKSPENGER"
            - "TILTAKSPENGER_OG_BARNETILLEGG"
            - "INGENTING"
        vedtakId:
          type: "string"
        sakId:
          type: "string"
        saksnummer:
          type: "string"
        kilde:
          type: "string"
        sats:
          type: "integer"
          format: "int32"
        satsBarnetillegg:
          type: "integer"
          format: "int32"
      required:
        - "fom"
        - "tom"
        - "rettighet"
        - "vedtakId"
        - "sakId"
        - "kilde"
    Periode:
      type: "object"
      properties:
        fraOgMed:
          type: "string"
          format: "date"
        tilOgMed:
          type: "string"
          format: "date"
      required:
        - "fraOgMed"
        - "tilOgMed"
    BarnetilleggPeriode:
      type: "object"
      properties:
        antallBarn:
          type: "integer"
          format: "int32"
        periode:
          $ref: "#/components/schemas/Periode"
      required:
        - "antallBarn"
        - "periode"
    Barnetillegg:
      type: "object"
      properties:
        perioder:
          type: "array"
          items:
            $ref: "#/components/schemas/BarnetilleggPeriode"
      required:
        - "perioder"
    VedtakDTO:
      type: "object"
      properties:
        vedtakId:
          type: "string"
        rettighet:
          type: "string"
          enum:
            - "TILTAKSPENGER"
            - "TILTAKSPENGER_OG_BARNETILLEGG"
            - "INGENTING"
        periode:
          $ref: "#/components/schemas/Periode"
        kilde:
          type: "string"
          enum:
            - "TPSAK"
            - "ARENA"
        barnetillegg:
          $ref: "#/components/schemas/Barnetillegg"
        sats:
          type: "integer"
          format: "int32"
        satsBarnetillegg:
          type: "integer"
          format: "int32"
        vedtaksperiode:
          $ref: "#/components/schemas/Periode"
        innvilgelsesperioder:
          type: "array"
          items:
            $ref: "#/components/schemas/Periode"
        omgjortAvRammevedtakId:
          type: "string"
        omgjorRammevedtakId:
          type: "string"
        vedtakstidspunkt:
          type: "string"
          format: "date-time"
      required:
        - "vedtakId"
        - "rettighet"
        - "periode"
        - "kilde"
    VedtakTidslinjeResponse:
      type: "object"
      properties:
        tidslinje:
          type: "array"
          items:
            $ref: "#/components/schemas/VedtakResponse"
        alleVedtak:
          type: "array"
          items:
            $ref: "#/components/schemas/VedtakResponse"
        vedtakFraArena:
          type: "array"
          items:
            $ref: "#/components/schemas/VedtakDTO"
        sak:
          type: "object"
          $ref: "#/components/schemas/Sak"
      required:
        - "tidslinje"
        - "alleVedtak"
        - "vedtakFraArena"
    VedtakResponse:
      type: "object"
      properties:
        vedtakId:
          type: "string"
        rettighet:
          type: "string"
          enum:
            - "TILTAKSPENGER"
            - "TILTAKSPENGER_OG_BARNETILLEGG"
            - "STANS"
            - "AVSLAG"
            - "OPPHÃ˜R"
        periode:
          $ref: "#/components/schemas/Periode"
        barnetillegg:
          $ref: "#/components/schemas/Barnetillegg"
        vedtaksdato:
          type: "string"
          format: "date"
        valgteHjemlerHarIkkeRettighet:
          type: "array"
          items:
            type: "string"
            enum:
              - "DELTAR_IKKE_PA_ARBEIDSMARKEDSTILTAK"
              - "ALDER"
              - "LIVSOPPHOLDSYTELSER"
              - "KVALIFISERINGSPROGRAMMET"
              - "INTRODUKSJONSPROGRAMMET"
              - "LONN_FRA_TILTAKSARRANGOR"
              - "LONN_FRA_ANDRE"
              - "INSTITUSJONSOPPHOLD"
              - "FREMMET_FOR_SENT"
        sats:
          type: "integer"
          format: "int32"
        satsBarnetillegg:
          type: "integer"
          format: "int32"
        vedtaksperiode:
          $ref: "#/components/schemas/Periode"
        innvilgelsesperioder:
          type: "array"
          items:
            $ref: "#/components/schemas/Periode"
        omgjortAvRammevedtakId:
          type: "string"
        omgjorRammevedtakId:
          type: "string"
      required:
        - "vedtakId"
        - "rettighet"
        - "periode"
        - "vedtaksdato"
    MeldekortResponse:
      type: "object"
      properties:
        meldekortKlareTilUtfylling:
          type: "array"
          items:
            $ref: "#/components/schemas/MeldekortKlartTilUtfylling"
        godkjenteMeldekort:
          type: "array"
          items:
            $ref: "#/components/schemas/GodkjentMeldekort"
      required:
        - "meldekortKlareTilUtfylling"
        - "godkjenteMeldekort"
    MeldekortKlartTilUtfylling:
      type: "object"
      properties:
        id:
          type: "string"
        kjedeId:
          type: "string"
        opprettet:
          type: "string"
          format: "date-time"
        fraOgMed:
          type: "string"
          format: "date"
        tilOgMed:
          type: "string"
          format: "date"
        maksAntallDagerForPeriode:
          type: "integer"
          format: "int32"
        girRett:
          description:
            "Dette er en Map<LocalDate, Boolean>, som dessverre ikke lar seg modellere med swagger"
          type: "object"
          additionalProperties:
            type: "object"
        kanFyllesUtFraOgMed:
          type: "string"
          format: "date"
      required:
        - "id"
        - "kjedeId"
        - "opprettet"
        - "fraOgMed"
        - "tilOgMed"
        - "maksAntallDagerForPeriode"
        - "girRett"
        - "kanFyllesUtFraOgMed"
    GodkjentMeldekort:
      type: "object"
      properties:
        meldekortbehandlingId:
          type: "string"
        kjedeId:
          type: "string"
        mottattTidspunkt:
          type: "string"
          format: "date-time"
        vedtattTidspunkt:
          type: "string"
          format: "date-time"
        behandletAutomatisk:
          type: "boolean"
        fraOgMed:
          type: "string"
          format: "date"
        tilOgMed:
          type: "string"
          format: "date"
        meldekortdager:
          type: "array"
          items:
            $ref: "#/components/schemas/MeldekortDag"
        status:
          type: "string"
          enum:
            - "SENDT_TIL_UTBETALING"
            - "KORRIGERING"
        journalpostId:
          type: "string"
        totaltBelop:
          type: "integer"
          format: "int32"
        sats:
          type: "integer"
          format: "int32"
        satsBarnetillegg:
          type: "integer"
          format: "int32"
        korrigering:
          type: "object"
          properties:
            totalDifferanse:
              type: "integer"
              format: "int32"
            resultat:
              type: "string"
        opprettet:
          type: "string"
          format: "date-time"
        sistEndret:
          type: "string"
          format: "date-time"
      required:
        - "meldekortbehandlingId"
        - "kjedeId"
        - "vedtattTidspunkt"
        - "behandletAutomatisk"
        - "fraOgMed"
        - "tilOgMed"
        - "meldekortdager"
        - "status"
        - "journalpostId"
        - "totaltBelop"
        - "sats"
        - "opprettet"
        - "sistEndret"
    MeldekortDag:
      type: "object"
      properties:
        dato:
          type: "string"
          format: "date"
        status:
          type: "string"
          enum:
            - "DELTATT_UTEN_LONN_I_TILTAKET"
            - "DELTATT_MED_LONN_I_TILTAKET"
            - "FRAVAER_SYK"
            - "FRAVAER_SYKT_BARN"
            - "FRAVAER_STERKE_VELFERDSGRUNNER_ELLER_JOBBINTERVJU"
            - "FRAVAER_GODKJENT_AV_NAV"
            - "FRAVAER_ANNET"
            - "IKKE_BESVART"
            - "IKKE_TILTAKSDAG"
            - "IKKE_RETT_TIL_TILTAKSPENGER"
        reduksjon:
          type: "string"
          enum:
            - "INGEN_REDUKSJON"
            - "UKJENT"
            - "YTELSEN_FALLER_BORT"
      required:
        - "dato"
        - "status"
        - "reduksjon"
    ArenaMeldekort:
      type: "object"
      properties:
        meldekortId:
          type: "string"
        mottatt:
          type: "string"
          format: "date"
        arbeidet:
          type: "boolean"
        kurs:
          type: "boolean"
        ferie:
          type: "boolean"
        syk:
          type: "boolean"
        annetFravaer:
          type: "boolean"
        fortsattArbeidsoker:
          type: "boolean"
        registrert:
          type: "string"
          format: "date-time"
        sistEndret:
          type: "string"
          format: "date-time"
        type:
          type: "string"
        status:
          type: "string"
        statusDato:
          format: "date"
          type: "string"
        meldegruppe:
          type: "string"
        aar:
          type: "integer"
          format: "int32"
        totaltArbeidetTimer:
          type: "integer"
          format: "int32"
        periode:
          $ref: "#/components/schemas/ArenaMeldekortPeriode"
        dager:
          type: "array"
          items:
            $ref: "#/components/schemas/ArenaMeldekortDag"
      required:
        - "meldekortId"
        - "mottatt"
        - "arbeidet"
        - "kurs"
        - "syk"
        - "annetFravaer"
        - "fortsattArbeidsoker"
        - "registrert"
        - "sistEndret"
        - "type"
        - "status"
        - "statusDato"
        - "meldegruppe"
        - "aar"
        - "totaltArbeidetTimer"
        - "periode"
        - "dager"
    ArenaMeldekortPeriode:
      type: "object"
      properties:
        aar:
          type: "integer"
          format: "int32"
        periodekode:
          type: "integer"
          format: "int32"
        ukenrUke1:
          type: "integer"
          format: "int32"
        ukenrUke2:
          type: "integer"
          format: "int32"
        fraOgMed:
          type: "string"
          format: "date"
        tilOgMed:
          type: "string"
          format: "date"
      required:
        - "aar"
        - "periodekode"
        - "ukenrUke1"
        - "ukenrUke2"
        - "fraOgMed"
        - "tilOgMed"
    ArenaMeldekortDag:
      type: "object"
      properties:
        aar:
          type: "integer"
          format: "int32"
        dagNr:
          type: "integer"
          format: "int32"
        arbeidet:
          type: "boolean"
        kurs:
          type: "boolean"
        ferie:
          type: "boolean"
        syk:
          type: "boolean"
        annetFravaer:
          type: "boolean"
        registrertAv:
            type: "string"
        registrert:
          type: "string"
          format: "date-time"
        arbeidetTimer:
          type: "integer"
          format: "int32"
      required:
        - "aar"
        - "dagNr"
        - "arbeidsdag"
        - "kurs"
        - "syk"
        - "annetFravaer"
        - "registrertAv"
        - "registrert"
        - "arbeidetTimer"
    ArenaUtbetalingshistorikk:
      type: "object"
      properties:
        meldekortId:
          type: "string"
        dato:
          type: "string"
          format: "date"
        transaksjonstype:
          type: "string"
        sats:
          type: "integer"
          format: "int32"
        status:
          type: "string"
        vedtakId:
          type: "string"
        belop:
          type: "integer"
          format: "int32"
        fraOgMedDato:
          type: "string"
          format: "date"
        tilOgMedDato:
            type: "string"
            format: "date"
      required:
        - "dato"
        - "transaksjonstype"
        - "sats"
        - "status"
        - "belop"
        - "fraOgMedDato"
        - "tilOgMedDato"
    ArenaUtbetalingshistorikkDetaljer:
      type: "object"
      properties:
        vedtakfakta:
          $ref: "#/components/schemas/Vedtakfakta"
        anmerkninger:
          type: "array"
          items:
            $ref: "#/components/schemas/Anmerkning"
      required:
        - "anmerkninger"
    Vedtakfakta:
      type: "object"
      properties:
        dagsats:
          type: "integer"
          format: "int32"
        gjelderFra:
          type: "string"
          format: "date"
        gjelderTil:
          type: "string"
          format: "date"
        antallUtbetalinger:
          type: "integer"
          format: "int32"
        belopPerUtbetaling:
          type: "integer"
          format: "int32"
        alternativBetalingsmottaker:
          type: "string"
    Anmerkning:
      type: "object"
      properties:
        kilde:
          type: "string"
        registrert:
          type: "string"
          format: "date-time"
        beskrivelse:
          type: "string"
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

security:
  - bearerAuth: [ ]
